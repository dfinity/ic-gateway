<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="robots" content="noindex, nofollow">
    <meta name="author" content="Internet Computer">

    <title>{{ERROR_TITLE}} - {{ERROR_CODE}} | Internet Computer</title>

    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,%3Csvg width='64' height='64' viewBox='0 0 64 64' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M52.5611 42.1464C48.1652 42.1464 43.5802 39.3103 41.3113 37.2306C38.8534 34.9617 32.0469 27.588 31.9996 27.5407C27.5092 22.5303 21.5062 17 15.5505 17C8.31851 17 2.03191 22.0104 0.424805 28.6278C0.566608 28.2024 2.83546 22.1522 11.4382 22.1522C15.8341 22.1522 20.419 24.9882 22.6879 27.068C25.1458 29.3369 31.9524 36.7106 31.9996 36.7579C36.4428 41.721 42.4458 47.2513 48.4488 47.2513C55.6807 47.2513 61.9673 42.2409 63.5744 35.6235C63.4799 36.0489 61.1638 42.1464 52.5611 42.1464Z' fill='%2329A3DA'/%3E%3Cpath d='M32.0002 36.7571C32.0002 36.7571 30.015 34.63 27.8407 32.3139C26.659 33.7319 24.9573 35.6227 22.9721 37.3716C19.2852 40.5858 16.9218 41.2475 15.5511 41.2475C10.3989 41.2475 6.19207 37.1825 6.19207 32.1721C6.19207 27.209 10.3989 23.0967 15.5511 23.0967C15.7401 23.0967 15.9765 23.0967 16.2601 23.144C14.7002 22.5295 13.0459 22.1514 11.4388 22.1514C2.83607 22.1514 0.519942 28.2016 0.425406 28.627C0.1418 29.7615 0 30.9432 0 32.1248C0 40.444 6.90109 47.2505 15.4565 47.2505C19.0489 47.2505 23.0194 45.4071 27.1789 41.8147C29.1169 40.1131 30.8185 38.2696 32.0948 36.8043C32.0475 36.7571 32.0002 36.7571 32.0002 36.7571Z' fill='url(%23paint0_linear_411_4674)'/%3E%3Cpath d='M31.9994 27.4934C31.9994 27.4934 33.9847 29.6205 36.159 31.9366C37.3407 30.5186 39.0423 28.6278 41.0275 26.8789C44.7144 23.6647 47.0778 23.003 48.4486 23.003C53.6007 23.003 57.8076 27.068 57.8076 32.0784C57.8076 37.0415 53.6007 41.1538 48.4486 41.1538C48.2595 41.1538 48.0232 41.1538 47.7395 41.1065C49.2994 41.721 50.9538 42.0991 52.5609 42.0991C61.1636 42.0991 63.4797 36.0489 63.5742 35.6235C63.8578 34.489 63.9996 33.3073 63.9996 32.1257C63.9996 23.8065 57.004 17 48.4486 17C44.9035 17 40.9803 18.8434 36.868 22.4358C34.93 24.1374 33.2284 25.9809 31.9521 27.4462C31.9521 27.4934 31.9994 27.4934 31.9994 27.4934Z' fill='url(%23paint1_linear_411_4674)'/%3E%3Cdefs%3E%3ClinearGradient id='paint0_linear_411_4674' x1='23.6094' y1='45.2718' x2='2.53984' y2='23.4537' gradientUnits='userSpaceOnUse'%3E%3Cstop offset='0.2195' stop-color='%23E51E79'/%3E%3Cstop offset='0.892' stop-color='%23522780'/%3E%3C/linearGradient%3E%3ClinearGradient id='paint1_linear_411_4674' x1='40.3717' y1='18.9918' x2='61.4412' y2='40.81' gradientUnits='userSpaceOnUse'%3E%3Cstop offset='0.21' stop-color='%23E95A24'/%3E%3Cstop offset='0.6841' stop-color='%23F3A83B'/%3E%3C/linearGradient%3E%3C/defs%3E%3C/svg%3E" type="image/svg+xml">

    <!-- External CSS -->
    <style>
        /* CSS Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            font-size: clamp(14px, 2vw, 18px);
            line-height: 1.5;
        }

        :root {
            /* Typography */
            --font-system: 'Circular', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;
            --font-mono: 'SF Mono', 'Monaco', 'Menlo', 'Consolas', 'Liberation Mono', 'Courier New', monospace;

            /* Font Sizes - Responsive Typography Scale */
            --text-xs: clamp(10px, 1.8vw, 14px);
            --text-sm: clamp(13px, 2.3vw, 16px);
            --text-base: clamp(14px, 2.5vw, 18px);
            --text-lg: clamp(14px, 2.8vw, 18px);
            --text-xl: clamp(24px, 6vw, 48px);

            /* Line Heights */
            --leading-xs: clamp(14px, 2.5vw, 18px);
            --leading-sm: clamp(16px, 3vw, 22px);
            --leading-base: clamp(18px, 3.5vw, 24px);
            --leading-lg: clamp(20px, 4vw, 26px);
            --leading-xl: clamp(30px, 7vw, 56px);
            --leading-button: clamp(50px, 8vh, 60px);

            /* Spacing Scale - Consistent Responsive Spacing */
            --space-xs: clamp(4px, 1vw, 8px);
            --space-sm: clamp(6px, 1.5vw, 12px);
            --space-md: clamp(8px, 2vw, 12px);
            --space-lg: clamp(12px, 3vw, 20px);
            --space-xl: clamp(16px, 4vw, 24px);
            --space-2xl: clamp(24px, 6vw, 40px);
            --space-3xl: clamp(32px, 8vw, 64px);
            --space-4xl: clamp(48px, 12vw, 80px);

            /* Padding Scale */
            --padding-xs: clamp(6px, 1.5vw, 8px);
            --padding-sm: clamp(12px, 3vw, 16px);
            --padding-md: clamp(12px, 3vw, 24px);
            --padding-lg: clamp(16px, 4vw, 32px);
            --padding-xl: clamp(20px, 4vh, 32px);

            /* Border Radius */
            --radius-sm: clamp(4px, 1vw, 6px);
            --radius-md: clamp(8px, 2vw, 12px);
            --radius-lg: 8px;
            --radius-full: 50%;

            /* Dimensions */
            --icon-sm: clamp(14px, 3.5vw, 16px);
            --icon-md: clamp(16px, 3vw, 24px);
            --icon-lg: clamp(20px, 4vw, 24px);
            --button-sm: clamp(28px, 7vw, 32px);
            --button-md: clamp(40px, 8vw, 48px);
            --button-height: clamp(40px, 8vh, 52px);

            /* Layout Widths */
            --width-content: clamp(300px, 70vw, 480px);
            --width-wrapper: clamp(400px, 80vw, 600px);
            --width-container: clamp(200px, 60vw, 300px);
            --width-section: 540px;
            --width-max: 1200px;

            /* Transitions */
            --transition-fast: 0.2s ease;
            --transition-base: 0.3s ease;
            --transition-slow: 0.5s ease;

            /* Shadows */
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.2);

            /* Z-Index Scale */
            --z-progress: 999;
            --z-toggle: 1000;

            /* Opacity Scale */
            --opacity-secondary: 0.9;

            /* Animation */
            --animation-gradient: gradientShift 8s ease-in-out infinite;

            /* Progress Bar Gradient */
            --gradient-progress: linear-gradient(90deg, #E51E79 0%, #512780 27.4%, #29A3DA 52.4%, #E95A24 69.71%, #F3A83B 97.6%);

            /* SVG Filters - Removed problematic filters that made images black */
            --icon-external-link-dark: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M4.16699 5.83366C3.94598 5.83366 3.73402 5.92146 3.57774 6.07774C3.42146 6.23402 3.33366 6.44598 3.33366 6.66699V15.8337C3.33366 16.0547 3.42146 16.2666 3.57774 16.4229C3.73402 16.5792 3.94598 16.667 4.16699 16.667H13.3337C13.5547 16.667 13.7666 16.5792 13.9229 16.4229C14.0792 16.2666 14.167 16.0547 14.167 15.8337V10.8337C14.167 10.3734 14.5401 10.0003 15.0003 10.0003C15.4606 10.0003 15.8337 10.3734 15.8337 10.8337V15.8337C15.8337 16.4967 15.5703 17.1326 15.1014 17.6014C14.6326 18.0703 13.9967 18.3337 13.3337 18.3337H4.16699C3.50395 18.3337 2.86807 18.0703 2.39923 17.6014C1.93038 17.1326 1.66699 16.4967 1.66699 15.8337V6.66699C1.66699 6.00395 1.93038 5.36807 2.39923 4.89923C2.86807 4.43038 3.50395 4.16699 4.16699 4.16699H9.16699C9.62723 4.16699 10.0003 4.54009 10.0003 5.00033C10.0003 5.46056 9.62723 5.83366 9.16699 5.83366H4.16699Z' fill='white'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M11.667 2.50033C11.667 2.04009 12.0401 1.66699 12.5003 1.66699H17.5003C17.9606 1.66699 18.3337 2.04009 18.3337 2.50033V7.50033C18.3337 7.96056 17.9606 8.33366 17.5003 8.33366C17.0401 8.33366 16.667 7.96056 16.667 7.50033V3.33366H12.5003C12.0401 3.33366 11.667 2.96056 11.667 2.50033Z' fill='white'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M18.0893 1.91107C18.4147 2.23651 18.4147 2.76414 18.0893 3.08958L8.92259 12.2562C8.59715 12.5817 8.06951 12.5817 7.74408 12.2562C7.41864 11.9308 7.41864 11.4032 7.74408 11.0777L16.9107 1.91107C17.2362 1.58563 17.7638 1.58563 18.0893 1.91107Z' fill='white'/%3E%3C/svg%3E");
            --icon-external-link: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M4.16699 5.83366C3.94598 5.83366 3.73402 5.92146 3.57774 6.07774C3.42146 6.23402 3.33366 6.44598 3.33366 6.66699V15.8337C3.33366 16.0547 3.42146 16.2666 3.57774 16.4229C3.73402 16.5792 3.94598 16.667 4.16699 16.667H13.3337C13.5547 16.667 13.7666 16.5792 13.9229 16.4229C14.0792 16.2666 14.167 16.0547 14.167 15.8337V10.8337C14.167 10.3734 14.5401 10.0003 15.0003 10.0003C15.4606 10.0003 15.8337 10.3734 15.8337 10.8337V15.8337C15.8337 16.4967 15.5703 17.1326 15.1014 17.6014C14.6326 18.0703 13.9967 18.3337 13.3337 18.3337H4.16699C3.50395 18.3337 2.86807 18.0703 2.39923 17.6014C1.93038 17.1326 1.66699 16.4967 1.66699 15.8337V6.66699C1.66699 6.00395 1.93038 5.36807 2.39923 4.89923C2.86807 4.43038 3.50395 4.16699 4.16699 4.16699H9.16699C9.62723 4.16699 10.0003 4.54009 10.0003 5.00033C10.0003 5.46056 9.62723 5.83366 9.16699 5.83366H4.16699Z' fill='currentColor'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M11.667 2.50033C11.667 2.04009 12.0401 1.66699 12.5003 1.66699H17.5003C17.9606 1.66699 18.3337 2.04009 18.3337 2.50033V7.50033C18.3337 7.96056 17.9606 8.33366 17.5003 8.33366C17.0401 8.33366 16.667 7.96056 16.667 7.50033V3.33366H12.5003C12.0401 3.33366 11.667 2.96056 11.667 2.50033Z' fill='currentColor'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M18.0893 1.91107C18.4147 2.23651 18.4147 2.76414 18.0893 3.08958L8.92259 12.2562C8.59715 12.5817 8.06951 12.5817 7.74408 12.2562C7.41864 11.9308 7.41864 11.4032 7.74408 11.0777L16.9107 1.91107C17.2362 1.58563 17.7638 1.58563 18.0893 1.91107Z' fill='currentColor'/%3E%3C/svg%3E");
            --icon-copy: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cg clip-path='url(%23clip0_414_1322)'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M8.33301 7.49967C7.87277 7.49967 7.49967 7.87277 7.49967 8.33301V16.6663C7.49967 17.1266 7.87277 17.4997 8.33301 17.4997H16.6663C17.1266 17.4997 17.4997 17.1266 17.4997 16.6663V8.33301C17.4997 7.87277 17.1266 7.49967 16.6663 7.49967H8.33301ZM5.83301 8.33301C5.83301 6.9523 6.9523 5.83301 8.33301 5.83301H16.6663C18.0471 5.83301 19.1663 6.9523 19.1663 8.33301V16.6663C19.1663 18.0471 18.0471 19.1663 16.6663 19.1663H8.33301C6.9523 19.1663 5.83301 18.0471 5.83301 16.6663V8.33301Z' fill='currentColor'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M3.33301 2.49967C2.87658 2.49967 2.49967 2.87658 2.49967 3.33301V11.6663C2.49967 12.1228 2.87658 12.4997 3.33301 12.4997C3.79325 12.4997 4.16634 12.8728 4.16634 13.333C4.16634 13.7932 3.79325 14.1663 3.33301 14.1663C1.9561 14.1663 0.833008 13.0432 0.833008 11.6663V3.33301C0.833008 1.9561 1.9561 0.833008 3.33301 0.833008H11.6663C13.0432 0.833008 14.1663 1.9561 14.1663 3.33301C14.1663 3.79325 13.7932 4.16634 13.333 4.16634C12.8728 4.16634 12.4997 3.79325 12.4997 3.33301C12.4997 2.87658 12.1228 2.49967 11.6663 2.49967H3.33301Z' fill='currentColor'/%3E%3C/g%3E%3Cdefs%3E%3CclipPath id='clip0_414_1322'%3E%3Crect width='20' height='20' fill='currentColor'/%3E%3C/clipPath%3E%3C/defs%3E%3C/svg%3E");

            /* Light Theme Colors */
            --bg-primary: #ffffff;
            --text-primary: #000000;
            --text-secondary: #474747;
            --button-bg: #000000;
            --button-text: #ffffff;
            --button-hover: #333333;
            --error-icon-fill: #ffffff;
            --error-icon-stroke: #474747;
            --icon-fill: #000000;
            --grey-tint: #eceaf3;
            --border-color: #e0e0e0;
            --accent-color: #007acc;
            --icon-external-link-hack: var(--icon-external-link);
        }

        /* Dark Theme Variables */
        @media (prefers-color-scheme: dark) {
            :root {
                --bg-primary: #1a1a1a;
                --text-primary: #ffffff;
                --text-secondary: #b3b3b3;
                --button-bg: #ffffff;
                --button-text: #000000;
                --button-hover: #e0e0e0;
                --error-icon-fill: #090B0E;
                --error-icon-stroke: #A5A5A5;
                --icon-fill: #ffffff;
                --grey-tint: #2a2a2a;
                --border-color: #404040;
                --accent-color: #4da6ff;
                --icon-external-link-hack: var(--icon-external-link-dark);
            }
        }

        [data-theme="dark"] {
            --bg-primary: #1a1a1a;
            --text-primary: #ffffff;
            --text-secondary: #b3b3b3;
            --button-bg: #ffffff;
            --button-text: #000000;
            --button-hover: #e0e0e0;
            --error-icon-fill: #090B0E;
            --error-icon-stroke: #A5A5A5;
            --icon-fill: #ffffff;
            --grey-tint: #2a2a2a;
            --border-color: #404040;
            --accent-color: #4da6ff;
            --icon-external-link-hack: var(--icon-external-link-dark);
        }

        [data-theme="light"] {
            --bg-primary: #ffffff;
            --text-primary: #000000;
            --text-secondary: #474747;
            --button-bg: #000000;
            --button-text: #ffffff;
            --button-hover: #333333;
            --error-icon-fill: #ffffff;
            --error-icon-stroke: #474747;
            --icon-fill: #000000;
            --grey-tint: #eceaf3;
            --border-color: #e0e0e0;
            --accent-color: #007acc;
            --icon-external-link-hack: var(--icon-external-link);
        }

        /* Base Styles */
        body {
            font-family: var(--font-system);
            background-color: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            transition: background-color var(--transition-base), color var(--transition-base);
        }

        /* Typography Classes */
        .font-system-regular { font-family: var(--font-system); font-weight: 400; }
        .font-system-medium { font-family: var(--font-system); font-weight: 500; }
        .font-system-semibold { font-family: var(--font-system); font-weight: 600; }
        .font-system-bold { font-family: var(--font-system); font-weight: 700; }
        .font-system-black { font-family: var(--font-system); font-weight: 900; }

        /* Layout Components */
        .container {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            min-height: 100vh;
            width: 100%;
            padding-top: 4px;
        }

        .progress-bar {
            height: 6px;
            width: 100vw;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: var(--gradient-progress);
            background-size: 200% 100%;
            animation: var(--animation-gradient);
            z-index: var(--z-progress);
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .theme-icon {
            font-size: clamp(18px, 4vw, 24px);
            line-height: 1;
            transition: all var(--transition-base);
        }

        .error-icon {
            display: block;
        }

        .action-button {
            display: block;
        }
        .action-button .theme-dark-icon {
            display: none;
        }
        [data-theme="dark"] .action-button {
            display: none;
        }
        [data-theme="dark"] .action-button {
            display: block;
        }

        /* Main Content Styles */
        .main-content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            width: 100%;
            padding: var(--padding-lg);
            gap: var(--space-xl);
            text-align: center;
        }

        .error-icon {
            position: relative;
            width: clamp(100px, 20vw, 120px);
            height: clamp(100px, 20vw, 120px);
        }

        .error-icon svg {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        #subnet rect {
            fill: var(--error-icon-stroke);
        }

        #subnet .box {
            fill: var(--error-icon-fill);
            stroke: var(--error-icon-stroke);
        }

        #subnet .top-layer {
            fill: #FFA742;
            stroke: var(--error-icon-stroke);
        }

        .icon-stroke {
            stroke: var(--error-icon-stroke);
        }

        .icon-fill {
            fill: var(--error-icon-fill);
        }

        .content-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-2xl);
            width: 100%;
            max-width: var(--width-section);
        }

        .content-wrapper {
            max-width: var(--width-section);
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: var(--space-xl);
            align-items: center;
        }

        .header-content {
            display: flex;
            flex-direction: column;
            gap: var(--space-lg);
            width: 100%;
        }

        .title-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-sm);
        }

        .error-code {
            color: var(--text-secondary);
            font-size: var(--text-base);
            line-height: var(--leading-base);
        }

        .main-title {
            font-size: var(--text-xl);
            line-height: var(--leading-xl);
            font-weight: 500;
        }

        .description {
            color: var(--text-secondary);
            font-size: var(--text-lg);
            line-height: var(--leading-lg);
            max-width: var(--width-content);
            margin: 0 auto;
        }

        .description a {
            color: var(--text-primary);
            text-decoration: underline;
        }

        .description a:hover {
            text-decoration: none;
        }

        .external-link::after {
            content: '';
            display: inline-block;
            width: 1em;
            height: 1em;
            margin-left: 0.25em;
            background-image: var(--icon-external-link-hack);
            background-size: contain;
            background-repeat: no-repeat;
            vertical-align: middle;
            color: var(--text-primary);
        }

        .action-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-xs);
            width: 100%;
        }

        .try-again-button {
            background-color: var(--button-bg);
            color: var(--button-text);
            border: none;
            border-radius: var(--radius-lg);
            height: var(--button-height);
            width: 100%;
            max-width: 240px;
            font-size: var(--text-base);
            cursor: pointer;
            transition: background-color var(--transition-base);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .try-again-button:hover { background-color: var(--button-hover); }

        .button-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
        }

        .button-text {
            line-height: 1;
            font-weight: 500;
        }

        .retry-info {
            color: var(--text-secondary);
            font-size: var(--text-sm);
            text-align: center;
            line-height: var(--leading-base);
            margin-top: var(--space-sm);
            min-height: 3em;
        }

        /* Footer Styles */
        .footer {
            width: 100%;
            padding: var(--padding-xl) var(--padding-lg) var(--space-3xl);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-2xl);
            margin-top: var(--space-xl);
        }

        .footer-links {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: var(--space-xl);
            flex-wrap: wrap;
        }

        .footer-link {
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            text-decoration: none;
            font-size: var(--text-lg);
            transition: all var(--transition-base);
        }

        .footer-link:hover { text-decoration: underline; }

        .footer-icon {
            width: var(--icon-lg);
            height: var(--icon-lg);
            transition: color var(--transition-base);
        }

        .footer-text,
        .footer-text-status {
            font-size: var(--text-sm);
            line-height: var(--leading-sm);
        }

        .footer-text-status { line-height: var(--leading-xs); }

        .powered-by {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            color: var(--text-secondary);
        }

        .powered-by-text {
            font-size: var(--text-base);
            line-height: var(--leading-base);
        }

        .powered-by-badge {
            height: 20px;
            width: auto;
            color: var(--text-primary);
        }

        .canister-error-section { margin-bottom: var(--space-lg); }

        .canister-id-container {
            background-color: var(--grey-tint);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            padding: var(--padding-sm);
        }

        .canister-id-wrapper {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .canister-id-text {
            font-family: var(--font-mono);
            font-size: var(--text-sm);
            color: var(--text-secondary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            direction: ltr;
            text-align: left;
            flex-grow: 1;
            padding-right: var(--space-sm);
        }

        .canister-id-text:hover {
            text-decoration: none;
        }

        .canister-id-text:focus {
            outline: none;
        }

        .canister-id-text::selection {
            background-color: var(--accent-color);
            color: var(--bg-primary);
        }

        .canister-id-text::-moz-selection {
            background-color: var(--accent-color);
            color: var(--bg-primary);
        }

        .canister-actions { display: flex; gap: var(--space-xs); }

        .action-button {
            background: transparent;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
            width: var(--button-sm);
            height: var(--button-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all var(--transition-base);
        }

        .action-button:hover {
            border-color: var(--accent-color);
        }

        .action-button svg {
            width: var(--icon-sm);
            height: var(--icon-sm);
            color: var(--icon-fill);
            transition: color var(--transition-base);
        }

        .icon-external-link {
            display: inline-block;
            width: 16px;
            height: 16px;
            color: var(--text-primary);
        }

        .icon-copy {
            display: inline-block;
            width: 16px;
            height: 16px;
            color: var(--text-primary);
        }

        .subnet-icon img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transition: opacity var(--transition-base);
        }

        @media (max-width: 480px) {
            .footer-links { flex-direction: column; gap: var(--space-xl); }
            .footer-link { gap: clamp(6px, 2vw, 8px); }
        }

        @media (max-height: 600px) {
            .main-content { gap: clamp(20px, 5vh, 40px); }
            .footer { margin-top: clamp(20px, 5vh, 40px); }
        }

        @media (min-width: 1200px) {
            .container { max-width: var(--width-max); margin: 0 auto; }
        }

        @media (prefers-reduced-motion: reduce) {
            .try-again-button,
            .action-button {
                transition: none;
            }
            .progress-bar { animation: none; background: var(--gradient-progress); }
        }

        button:focus,
        a:focus {
            outline: 2px solid var(--accent-color);
            outline-offset: 2px;
            border-radius: var(--radius-sm);
        }

        /* Toast Notification Styles */
        .toast {
            position: fixed;
            bottom: -100px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--button-bg);
            color: var(--button-text);
            padding: var(--padding-md) var(--padding-lg);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            z-index: var(--z-toggle);
            opacity: 0;
            transition: all 0.5s ease;
        }

        .toast.show {
            opacity: 1;
            bottom: 50px;
        }
    </style>

    <!-- Initialize theme immediately to prevent flash -->
    <script>
        (function() {
            const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const theme = (systemPrefersDark ? 'dark' : 'light');
            document.documentElement.setAttribute('data-theme', theme);
        })();
    </script>
</head>
<body>
    <!-- Progress indicator -->
    <div class="progress-bar" role="progressbar" aria-label="Page loading progress"></div>

    <div class="container">
        <!-- Main content -->
        <main class="main-content">
            <!-- Icon -->
            <div class="error-icon" role="img" aria-label="Internet Computer service status">
                {{IMAGE_SVG}}
            </div>

            <!-- Error Details -->
            <section class="content-section">
                <div class="content-wrapper">
                    <header class="header-content">
                        <div class="title-section">
                            <p class="error-code font-system-regular">Error {{ERROR_CODE}}</p>
                            <h1 class="main-title font-system-medium">{{ERROR_TITLE}}</h1>
                        </div>
                        <p class="description font-system-regular">{{ERROR_DESCRIPTION}}</p>
                    </header>

                    {{CANISTER_SECTION}}
                    {{RETRY_SECTION}}
                    {{APPEAL_SECTION}}

                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <nav class="footer-links" aria-label="Help and status links">
                <a href="https://forum.dfinity.org/" class="footer-link" aria-label="Visit forum for help" target="_blank" rel="noopener noreferrer">

                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0_411_4513)">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M9.99967 2.49967C5.85754 2.49967 2.49967 5.85754 2.49967 9.99967C2.49967 14.1418 5.85754 17.4997 9.99967 17.4997C14.1418 17.4997 17.4997 14.1418 17.4997 9.99967C17.4997 5.85754 14.1418 2.49967 9.99967 2.49967ZM0.833008 9.99967C0.833008 4.93706 4.93706 0.833008 9.99967 0.833008C15.0623 0.833008 19.1663 4.93706 19.1663 9.99967C19.1663 15.0623 15.0623 19.1663 9.99967 19.1663C4.93706 19.1663 0.833008 15.0623 0.833008 9.99967Z" fill="currentColor"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M10.2149 6.68676C9.82694 6.62022 9.42797 6.69312 9.08864 6.89255C8.7493 7.09198 8.4915 7.40507 8.36088 7.77636C8.20816 8.21052 7.73239 8.43866 7.29824 8.28594C6.86408 8.13321 6.63593 7.65745 6.78866 7.22329C7.04989 6.4807 7.5655 5.85452 8.24416 5.45566C8.92283 5.0568 9.72077 4.911 10.4966 5.04408C11.2725 5.17716 11.9762 5.58054 12.4832 6.18276C12.99 6.78487 13.2675 7.54689 13.2664 8.33392C13.2661 9.60921 12.3206 10.4514 11.6454 10.9015C11.2823 11.1436 10.9252 11.3215 10.6622 11.4384C10.5295 11.4974 10.4177 11.5422 10.3372 11.5728C10.2969 11.5882 10.2642 11.6001 10.2404 11.6086L10.2114 11.6187L10.2022 11.6219L10.1989 11.623L10.1977 11.6234C10.1974 11.6235 10.1966 11.6237 9.9331 10.8332L10.1966 11.6237C9.76001 11.7693 9.28807 11.5333 9.14254 11.0967C8.99709 10.6604 9.23265 10.1888 9.66871 10.0429L9.66764 10.0432C9.66773 10.0432 9.6678 10.0432 9.66871 10.0429L9.68201 10.0382C9.69482 10.0337 9.71584 10.026 9.74386 10.0154C9.80006 9.99395 9.88362 9.96058 9.98528 9.9154C10.191 9.82398 10.4589 9.68943 10.7209 9.51478C11.2955 9.13167 11.5998 8.7241 11.5998 8.33316L11.5998 8.33192C11.6004 7.93832 11.4616 7.55721 11.2081 7.2561C10.9547 6.95499 10.6028 6.7533 10.2149 6.68676Z" fill="currentColor"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M9.16699 14.1663C9.16699 13.7061 9.54009 13.333 10.0003 13.333H10.0087C10.4689 13.333 10.842 13.7061 10.842 14.1663C10.842 14.6266 10.4689 14.9997 10.0087 14.9997H10.0003C9.54009 14.9997 9.16699 14.6266 9.16699 14.1663Z" fill="currentColor"/>
                        </g>
                        <defs>
                        <clipPath id="clip0_411_4513">
                        <rect width="20" height="20" fill="currentColor"/>
                        </clipPath>
                        </defs>
                     </svg>

                    <span class="footer-text">Forum</span>
                </a>

                <a href="https://status.internetcomputer.org" class="footer-link" aria-label="Check Internet Computer status" target="_blank" rel="noopener noreferrer">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0_411_4514)">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M13.0522 3.14409C11.5749 2.48584 9.92437 2.32277 8.34682 2.6792C6.76927 3.03562 5.34919 3.89245 4.29839 5.12189C3.24758 6.35133 2.62235 7.88751 2.51593 9.50132C2.40952 11.1151 2.82763 12.7201 3.7079 14.0769C4.58817 15.4337 5.88344 16.4695 7.40053 17.03C8.91762 17.5905 10.5752 17.6456 12.1262 17.187C13.6771 16.7284 15.0383 15.7808 16.0067 14.4855C16.9751 13.1901 17.4988 11.6164 17.4997 9.99909V9.2329C17.4997 8.77266 17.8728 8.39956 18.333 8.39956C18.7932 8.39956 19.1663 8.77266 19.1663 9.2329V9.99956C19.1652 11.9763 18.5251 13.9002 17.3416 15.4834C16.158 17.0666 14.4944 18.2248 12.5988 18.7853C10.7032 19.3457 8.67716 19.2784 6.82294 18.5934C4.96872 17.9084 3.38561 16.6423 2.30972 14.984C1.23384 13.3257 0.722816 11.3641 0.852878 9.39166C0.98294 7.41922 1.74711 5.54167 3.03143 4.03902C4.31575 2.53637 6.05139 1.48914 7.97951 1.05351C9.90764 0.617872 11.9249 0.817181 13.7305 1.62171C14.1509 1.80902 14.3399 2.30167 14.1525 2.72206C13.9652 3.14246 13.4726 3.3314 13.0522 3.14409Z" fill="currentColor"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M18.9226 2.74378C19.2482 3.06906 19.2485 3.59669 18.9232 3.92229L10.5899 12.264C10.4336 12.4204 10.2216 12.5083 10.0005 12.5083C9.77945 12.5084 9.5674 12.4206 9.41107 12.2643L6.91107 9.76426C6.58563 9.43882 6.58563 8.91118 6.91107 8.58574C7.23651 8.26031 7.76414 8.26031 8.08958 8.58574L10 10.4962L17.7441 2.74437C18.0694 2.41877 18.597 2.41851 18.9226 2.74378Z" fill="currentColor"/>
                        </g>
                        <defs>
                        <clipPath id="clip0_411_4514">
                        <rect width="20" height="20" fill="currentColor"/>
                        </clipPath>
                        </defs>
                    </svg>
                    <span class="footer-text-status">Internet Computer Status</span>
                </a>
            </nav>

            <div class="powered-by">
                <svg class="powered-by-badge" width="254" height="20" viewBox="0 0 254 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_411_4412_footer_badge)">
                    <path d="M1.32004 9.67881V13.6082H0V4.03027H3.49964C5.28015 4.03027 6.4467 5.25822 6.4467 6.85454C6.4467 8.48157 5.24946 9.67881 3.49964 9.67881H1.32004ZM3.25405 8.48157C4.3899 8.48157 5.09596 7.8369 5.09596 6.85454C5.09596 5.84149 4.3899 5.19682 3.25405 5.19682H1.32004V8.48157H3.25405Z" fill="currentColor"/>
                    <path d="M13.6612 10.3543C13.6612 12.3497 12.2797 13.8232 10.3457 13.8232C8.41171 13.8232 7.03027 12.3497 7.03027 10.3543C7.03027 8.38955 8.41171 6.91602 10.3457 6.91602C12.2797 6.91602 13.6612 8.35885 13.6612 10.3543ZM12.3718 10.3543C12.3718 8.85003 11.4202 8.05186 10.3457 8.05186C9.27127 8.05186 8.31961 8.85003 8.31961 10.3543C8.31961 11.8585 9.27127 12.6873 10.3457 12.6873C11.4202 12.6566 12.3718 11.8585 12.3718 10.3543Z" fill="currentColor"/>
                    <path d="M20.2921 7.10059L21.9806 11.9817L23.4234 7.10059H24.7741L22.6559 13.6087H21.3359L19.6168 8.66621L17.9283 13.6087H16.5776L14.4287 7.10059H15.8101L17.2837 11.9817L18.9721 7.10059H20.2921Z" fill="currentColor"/>
                    <path d="M31.7427 11.7351C31.3743 12.871 30.3305 13.7919 28.8263 13.7919C27.0765 13.7919 25.5723 12.5333 25.5723 10.323C25.5723 8.2969 27.0458 6.88477 28.6728 6.88477C30.6682 6.88477 31.8041 8.2662 31.8041 10.2923C31.8041 10.4458 31.8041 10.63 31.7734 10.6914H26.8923C26.923 11.8579 27.7519 12.6561 28.857 12.6561C29.9008 12.6561 30.4226 12.0728 30.6682 11.3361L31.7427 11.7351ZM30.484 9.67834C30.4533 8.75738 29.8394 8.02061 28.7035 8.02061C27.6291 8.02061 26.9844 8.84947 26.923 9.67834H30.484Z" fill="currentColor"/>
                    <path d="M36.9921 8.38925C36.8079 8.35855 36.6237 8.35855 36.4395 8.35855C35.3651 8.35855 34.659 8.91112 34.659 10.354V13.608H33.4004V7.09991H34.6283V8.23576C35.0888 7.2227 35.9177 7.00781 36.5623 7.00781C36.7465 7.00781 36.9 7.03851 36.9921 7.03851V8.38925Z" fill="currentColor"/>
                    <path d="M43.9292 11.7351C43.5608 12.871 42.5171 13.7919 41.0128 13.7919C39.263 13.7919 37.7588 12.5333 37.7588 10.323C37.7588 8.2969 39.2323 6.88477 40.8593 6.88477C42.8548 6.88477 43.9906 8.2662 43.9906 10.2923C43.9906 10.4458 43.9906 10.63 43.9599 10.6914H39.0788C39.1095 11.8579 39.9384 12.6561 41.0435 12.6561C42.0873 12.6561 42.6092 12.0728 42.8548 11.3361L43.9292 11.7351ZM42.6399 9.67834C42.6092 8.75738 41.9952 8.02061 40.8593 8.02061C39.7849 8.02061 39.1402 8.84947 39.0788 9.67834H42.6399Z" fill="currentColor"/>
                    <path d="M50.2229 12.6249C49.9159 13.2389 49.2099 13.7915 48.1968 13.7915C46.2935 13.7915 45.127 12.2873 45.127 10.3532C45.127 8.51133 46.3549 6.94571 48.1968 6.94571C49.3327 6.94571 49.9773 7.49828 50.1922 8.05086V3.81445H51.4509V12.3794C51.4509 12.9933 51.5123 13.4845 51.5123 13.5766H50.2843C50.2536 13.4231 50.2229 13.0854 50.2229 12.6863V12.6249ZM48.3503 12.6556C49.5168 12.6556 50.2229 11.6426 50.2229 10.2919C50.2229 8.94111 49.5168 8.05086 48.3503 8.05086C47.1838 8.05086 46.447 9.00251 46.447 10.3225C46.447 11.6733 47.1224 12.6556 48.3503 12.6556Z" fill="currentColor"/>
                    <path d="M56.9463 13.6073V3.81445H58.2049V8.02016C58.5119 7.43688 59.2794 6.91501 60.3538 6.91501C62.3185 6.91501 63.3316 8.41924 63.3316 10.3225C63.3316 12.2566 62.2264 13.7915 60.2924 13.7915C59.3408 13.7915 58.604 13.3617 58.1742 12.6556V13.6073H56.9463ZM60.1082 8.02016C58.9724 8.02016 58.1742 8.91042 58.1742 10.2919C58.1742 11.704 58.9724 12.6249 60.1082 12.6249C61.2748 12.6249 62.0116 11.704 62.0116 10.2919C62.0116 8.91042 61.2748 8.02016 60.1082 8.02016Z" fill="currentColor"/>
                    <path d="M65.1119 16.3102L66.7389 12.8719L63.9453 7.10059H65.4188L67.4449 11.5826L69.379 7.10059H70.7297L66.4933 16.3102H65.1119Z" fill="currentColor"/>
                    <path d="M112.418 16.4322C109.563 16.4322 106.585 14.5903 105.112 13.2396C103.516 11.766 99.095 6.97707 99.0643 6.94637C96.1479 3.69232 92.2492 0.100586 88.3812 0.100586C83.6843 0.100586 79.6014 3.35463 78.5576 7.65243C78.6497 7.37615 80.1232 3.44673 85.7104 3.44673C88.5654 3.44673 91.5431 5.28864 93.0166 6.63938C94.613 8.11291 99.0336 12.9019 99.0643 12.9326C101.95 16.1559 105.849 19.7477 109.747 19.7477C114.444 19.7477 118.527 16.4936 119.571 12.1958C119.51 12.4721 118.005 16.4322 112.418 16.4322Z" fill="#29A3DA"/>
                    <path d="M99.0642 12.9321C99.0642 12.9321 97.7748 11.5507 96.3627 10.0465C95.5952 10.9674 94.4901 12.1954 93.2008 13.3312C90.8063 15.4187 89.2713 15.8485 88.3811 15.8485C85.0349 15.8485 82.3028 13.2084 82.3028 9.95439C82.3028 6.73104 85.0349 4.06026 88.3811 4.06026C88.5039 4.06026 88.6574 4.06026 88.8416 4.09096C87.8285 3.69188 86.7541 3.44629 85.7103 3.44629C80.1232 3.44629 78.6189 7.37571 78.5575 7.65199C78.3733 8.38876 78.2812 9.15622 78.2812 9.92369C78.2812 15.3266 82.7632 19.7472 88.3197 19.7472C90.6528 19.7472 93.2315 18.55 95.9329 16.2169C97.1916 15.1117 98.2967 13.9145 99.1256 12.9628C99.0949 12.9321 99.0642 12.9321 99.0642 12.9321Z" fill="url(#paint0_linear_411_4412_footer_badge)"/>
                    <path d="M99.0639 6.91567C99.0639 6.91567 100.353 8.2971 101.765 9.80133C102.533 8.88038 103.638 7.65243 104.927 6.51659C107.322 4.42908 108.857 3.9993 109.747 3.9993C113.093 3.9993 115.825 6.63938 115.825 9.89343C115.825 13.1168 113.093 15.7876 109.747 15.7876C109.624 15.7876 109.471 15.7876 109.287 15.7569C110.3 16.1559 111.374 16.4015 112.418 16.4015C118.005 16.4015 119.509 12.4721 119.571 12.1958C119.755 11.4591 119.847 10.6916 119.847 9.92413C119.847 4.52118 115.303 0.100586 109.747 0.100586C107.445 0.100586 104.897 1.29783 102.226 3.63092C100.967 4.73607 99.8621 5.93331 99.0332 6.88497C99.0332 6.91567 99.0639 6.91567 99.0639 6.91567Z" fill="url(#paint1_linear_411_4412_footer_badge)"/>
                    <path d="M127.368 13.4235V5.19629H129.578V13.4235H127.368Z" fill="currentColor"/>
                    <path d="M136.424 13.4235L133.569 8.54243V13.4235H131.42V5.19629H133.937L136.516 9.64758V5.19629H138.665V13.4235H136.424Z" fill="currentColor"/>
                    <path d="M144.375 7.25309V13.4235H142.196V7.25309H139.832V5.19629H146.739V7.25309H144.375Z" fill="currentColor"/>
                    <path d="M147.905 13.4235V5.19629H153.185V7.0689H150.085V8.38894H152.909V10.2002H150.085V11.5202H153.185V13.4235H147.905Z" fill="currentColor"/>
                    <path d="M154.721 13.4235V5.19629H158.19C159.847 5.19629 160.953 6.30144 160.953 7.83637C160.953 8.94152 160.339 9.77038 159.418 10.1388L160.983 13.4235H158.619L157.33 10.4457H156.87V13.4235H154.721ZM157.791 8.75732C158.435 8.75732 158.773 8.38894 158.773 7.86706C158.773 7.34519 158.435 6.97681 157.791 6.97681H156.9V8.75732H157.791Z" fill="currentColor"/>
                    <path d="M167.368 13.4235L164.513 8.54243V13.4235H162.364V5.19629H164.882L167.46 9.64758V5.19629H169.609V13.4235H167.368Z" fill="currentColor"/>
                    <path d="M171.421 13.4235V5.19629H176.701V7.0689H173.6V8.38894H176.425V10.2002H173.6V11.5202H176.732V13.4235H171.421Z" fill="currentColor"/>
                    <path d="M182.502 7.25309V13.4235H180.323V7.25309H177.959V5.19629H184.897V7.25309H182.502Z" fill="currentColor"/>
                    <path d="M190.208 9.30952C190.208 10.691 191.191 11.4584 192.173 11.4584C193.309 11.4584 193.8 10.7524 193.984 10.1691L196.041 10.7524C195.703 11.9803 194.629 13.5766 192.204 13.5766C189.932 13.5766 187.998 11.9189 187.998 9.30952C187.998 6.70014 189.963 5.01172 192.173 5.01172C194.537 5.01172 195.611 6.45455 195.949 7.68249L193.954 8.35786C193.8 7.80529 193.37 7.09922 192.204 7.09922C191.221 7.09922 190.208 7.80529 190.208 9.30952Z" fill="currentColor"/>
                    <path d="M200.922 5.01172C203.194 5.01172 205.158 6.63874 205.158 9.30952C205.158 11.9803 203.194 13.6073 200.922 13.6073C198.65 13.6073 196.686 11.9803 196.686 9.30952C196.686 6.63874 198.65 5.01172 200.922 5.01172ZM200.922 11.5198C201.874 11.5198 202.917 10.8444 202.917 9.30952C202.917 7.80529 201.904 7.12992 200.922 7.12992C199.94 7.12992 198.927 7.80529 198.927 9.30952C198.927 10.8137 199.97 11.5198 200.922 11.5198Z" fill="currentColor"/>
                    <path d="M213.754 13.4235V8.32754L211.943 13.4235H210.224L208.444 8.38894V13.4235H206.387V5.19629H209.272L211.114 10.2002L212.864 5.19629H215.842V13.4235H213.754Z" fill="currentColor"/>
                    <path d="M219.832 10.6299V13.4235H217.684V5.19629H220.968C222.687 5.19629 223.854 6.33214 223.854 7.89776C223.854 9.52479 222.687 10.5992 220.968 10.5992H219.832V10.6299ZM220.692 8.81872C221.275 8.81872 221.674 8.48104 221.674 7.92846C221.674 7.34519 221.245 7.0382 220.692 7.0382H219.863V8.84942H220.692V8.81872Z" fill="currentColor"/>
                    <path d="M224.989 10.415V5.19629H227.169V10.323C227.169 11.1211 227.599 11.5509 228.305 11.5509C229.011 11.5509 229.441 11.1211 229.441 10.323V5.19629H231.62V10.415C231.62 12.4718 230.239 13.6077 228.335 13.6077C226.371 13.6077 224.989 12.4718 224.989 10.415Z" fill="currentColor"/>
                    <path d="M237.269 7.25309V13.4235H235.089V7.25309H232.726V5.19629H239.663V7.25309H237.269Z" fill="currentColor"/>
                    <path d="M240.83 13.4235V5.19629H246.11V7.0689H243.01V8.38894H245.834V10.2002H243.01V11.5202H246.141V13.4235H240.83Z" fill="currentColor"/>
                    <path d="M247.737 13.4235V5.19629H251.206C252.864 5.19629 253.969 6.30144 253.969 7.83637C253.969 8.94152 253.355 9.77038 252.434 10.1388L254 13.4235H251.636L250.347 10.4457H249.886V13.4235H247.737ZM250.776 8.75732C251.421 8.75732 251.759 8.38894 251.759 7.86706C251.759 7.34519 251.421 6.97681 250.776 6.97681H249.886V8.75732H250.776Z" fill="currentColor"/>
                    </g>
                    <defs>
                    <linearGradient id="paint0_linear_411_4412_footer_badge" x1="93.6146" y1="18.4621" x2="79.9308" y2="4.29209" gradientUnits="userSpaceOnUse">
                    <stop offset="0.2195" stop-color="#E51E79"/>
                    <stop offset="0.892" stop-color="#522780"/>
                    </linearGradient>
                    <linearGradient id="paint1_linear_411_4412_footer_badge" x1="104.501" y1="1.39419" x2="118.185" y2="15.5643" gradientUnits="userSpaceOnUse">
                    <stop offset="0.21" stop-color="#E95A24"/>
                    <stop offset="0.6841" stop-color="#F3A83B"/>
                    </linearGradient>
                    <clipPath id="clip0_411_4412_footer_badge">
                    <rect width="254" height="20" fill="white"/>
                    </clipPath>
                    </defs>
                </svg>
            </div>
        </footer>

        <div id="toast" class="toast" role="alert" aria-live="assertive">
            <p class="toast-message">Copied to clipboard</p>
        </div>
    </div>

    <script>
        // Canister action functionality
        function copyCanisterId() {
            const canisterElement = document.querySelector('.canister-id-text');
            const canisterId = canisterElement?.getAttribute('data-full-id')?.trim() || canisterElement?.textContent?.trim();

            if (!canisterId) {
                console.error('No canister ID found');
                return;
            }

            const showToast = () => {
                const toast = document.getElementById('toast');
                if (toast) {
                    toast.classList.add('show');
                    setTimeout(() => toast.classList.remove('show'), 3000);
                }
            };

            const fallbackCopy = () => {
                const textArea = document.createElement('textarea');
                textArea.value = canisterId;
                textArea.style.position = 'fixed'; // Prevent scrolling to bottom on iOS
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();

                try {
                    const successful = document.execCommand('copy');
                    if (successful) showToast();
                    else console.error('Fallback copy was unsuccessful');
                } catch (err) {
                    console.error('Fallback copy failed:', err);
                }

                document.body.removeChild(textArea);
            };

            if (navigator.clipboard?.writeText) {
                navigator.clipboard.writeText(canisterId)
                    .then(showToast)
                    .catch(err => {
                        console.error('Clipboard API failed:', err);
                        fallbackCopy();
                    });
            } else {
                fallbackCopy();
            }
        }

        function openCanisterLink() {
            const canisterElement = document.querySelector('.canister-id-text');
            const canisterId = canisterElement ?
                (canisterElement.getAttribute('data-full-id') || canisterElement.textContent.trim()) : null;

            if (!canisterId) {
                console.error('No canister ID found');
                return;
            }

            const url = `https://dashboard.internetcomputer.org/canister/${canisterId}`;
            window.open(url, '_blank', 'noopener,noreferrer');
        }

        {{RETRY_LOGIC}}

        // Initialize theme with system preference detection
        function initTheme() {
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const theme = (prefersDark ? 'dark' : 'light');

            document.documentElement.setAttribute('data-theme', theme);

            // Listen for system theme changes
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
                const newTheme = e.matches ? 'dark' : 'light';
                document.documentElement.setAttribute('data-theme', newTheme);
            });
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', function() {
            initTheme();
        });

        window.addEventListener('beforeunload', function() {
            if (retryTimer) {
                clearInterval(retryTimer);
            }
        });

        window.addEventListener('online', function() {
            retryConnection();
        });

        window.addEventListener('offline', function() {
            if (retryTimer) {
                clearInterval(retryTimer);
            }
            const retryInfo = document.querySelector('.retry-info');
            retryInfo.innerHTML = 'No internet connection detected.<br>Please check your connection and try again.';
        });
    </script>
</body>
</html>
